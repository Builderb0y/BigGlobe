{
	"dimensions": {
		"minecraft:overworld": {
			"type": "bigglobe:overworld",
			"generator": {
				"type": "bigglobe:scripted",
				"value": {
					"reload_dimension": "minecraft:overworld",
					"height": {
						"min_y": -1024,
						"max_y":  1024,
						"sea_level": 0
					},
					"layer": {
						"state": "'minecraft:air'",
						"children": [
							{
								"type": "simple_2d",
								"state": "'minecraft:stone'",
								"before_children": [
									"if (distantHorizons && `bigglobe:overworld/glacier_cell`.?hard_distance ?: 1.0L <= `bigglobe:overworld/glacier_crack_threshold`:",
										"setBlockStates(",
											"max(",
												"ceilInt(`bigglobe:overworld/processed_surface_y`),",
												"floorInt(`bigglobe:overworld/glacier_min_y`)",
											"),",
											"floorInt(`bigglobe:overworld/glacier_max_y`),",
											"'minecraft:snow_block'",
										")",
										"int layers = truncInt(`bigglobe:overworld/glacier_max_y` % 1.0L * 8.0L)",
										"if (layers != 0: setBlockState(floorInt(`bigglobe:overworld/glacier_max_y`), BlockState('minecraft:snow', layers: layers)))",
									")"
								],
								"after_children": [
									"int surfaceY = ceilInt(`bigglobe:overworld/processed_surface_y`)",
									";skip the bulk of the work if the surface is outside the world height,",
									";which could happen with cubic chunks.",
									"if (surfaceY.isBetween[minY, maxY]:",
										"long seed = columnSeed(16x89EA3521C6A72ABCUL)",
										"double slopeSquared = (",
											"+ dx(`bigglobe:overworld/basic_surface_y`) ^ 2",
											"+ dz(`bigglobe:overworld/basic_surface_y`) ^ 2",
										")",
										"if ((seed := seed.newSeed()).nextDouble() < unmixSmooth(8.0L, 4.0L, `bigglobe:overworld/processed_surface_y`):",
											"int depth = (seed := seed.newSeed()).nextInt(3, 7)",
											"setBlockStates(surfaceY - depth, surfaceY, 'minecraft:gravel')",
										")",
										"int depth = floorInt(",
											"+ (seed := seed.newSeed()).nextDouble(3.0L, 7.0L) ;base randomness",
											"- (slopeSquared * 3.0L) ;less depth when slope is high",
											"+ (`bigglobe:overworld/height_adjusted_foliage`(surfaceY) * 2.0L)",
										")",
										"if (depth > 0:",
											"SurfaceStates states = `bigglobe:overworld/surface_states`",
											"boolean hadBlock = false",
											"for (int y in -range[surfaceY - depth, surfaceY):",
												"hadBlock = (getBlockState(y) != BlockState('minecraft:air')).if(",
													"setBlockState(y, hadBlock ? states.subsurfaceState : states.surfaceState)",
												")",
											")",
										")",
										"if (`bigglobe:overworld/processed_surface_y` > `bigglobe:overworld/sea_level` && (seed := seed.newSeed()).nextFloat() < `bigglobe:overworld/snow_chance`:",
											"int snowStart = surfaceY",
											"while (snowStart > minY && getBlockState(snowStart - 1).isAir(): --snowStart)",
											"int snowEnd = ceilInt(`bigglobe:overworld/snow_y`) - 1",
											"if (snowEnd >= snowStart:",
												"setBlockStates(snowStart, snowEnd, 'minecraft:snow[layers=8]')",
												"int remaining = floorInt((`bigglobe:overworld/snow_y` % 1.0I) * 8.0I)",
												"if (snowStart == snowEnd: remaining = max(remaining, 1))",
												"if (remaining != 0:",
													"setBlockState(snowEnd, BlockState('minecraft:snow', layers: remaining))",
												")",
											")",
											"else (",
												"setBlockState(snowStart, 'minecraft:snow[layers=1]')",
											")",
										")",
									")"
								],
								"valid": {
									"max_y": "ceilInt(`bigglobe:overworld/processed_surface_y`)",
									"min_y": "distantHorizons ? ceilInt(`bigglobe:overworld/basic_surface_y`) - 32 : 16x80000000U"
								},
								"children": [
									{
										"type": "simple_3d",
										"state": "'minecraft:air'",
										"condition": "`bigglobe:overworld/cave`.noise(y) < 0.5I",
										"after_children": [
											"OverworldCaveCell cave = `bigglobe:overworld/cave`",
											"float rawDepth = cave.surface_depth",
											"CaveFloorStates floorStates = cave.floor_states",
											"CaveCeilingStates ceilingStates = cave.ceiling_states",
											"boolean canGenerateFloor = rawDepth > 0.0L && floorStates != null",
											"boolean canGenerateCeiling = rawDepth > 0.0L && ceilingStates != null",
											"if (canGenerateFloor || canGenerateCeiling:",
												"double basicSurfaceY = ceilInt(`bigglobe:overworld/basic_surface_y`)",
												"double processedSurfaceY = ceilInt(`bigglobe:overworld/processed_surface_y`)",
												"double maxCaveDepth = ceilInt(`bigglobe:overworld/cave`.depth)",
												"int minIteration = floorInt(basicSurfaceY - maxCaveDepth)",
												"int maxIteration = ceilInt(processedSurfaceY)",
												"if (canGenerateFloor:",
													"for (int y = maxIteration + 1, (y := getBottomOfSegment(y - 1)) >= minIteration, noop:",
														"if (getBlockState(y) == BlockState('minecraft:air'):",
															"int limit = max(getBottomOfSegment(y - 1), y - floorInt(columnSeed(16x1CAD9C3F950EB0EFUL).newSeed(y).nextFloat(rawDepth)) - 1)",
															"setBlockStates(limit, y, floorStates.under)",
															"setBlockState(y - 1, floorStates.top)",
														")",
													")",
												")",
												"if (canGenerateCeiling:",
													"for (int y = minIteration, (y := getTopOfSegment(y)) <= maxIteration, noop:",
														"if (getBlockState(y - 1) == BlockState('minecraft:air'):",
															"int limit = min(getTopOfSegment(y), y + floorInt(columnSeed(16xD34EFA2F169E4C50UL).newSeed(y).nextFloat(rawDepth)) + 1)",
															"setBlockStates(y, limit, ceilingStates.above)",
															"setBlockState(y, ceilingStates.bottom)",
														")",
													")",
												")",
											")"
										],
										"valid": {
											"where": "!surfaceOnly",
											"min_y": "floorInt(`bigglobe:overworld/basic_surface_y` - `bigglobe:overworld/cave`.depth) + 1",
											"max_y": "floorInt(`bigglobe:overworld/processed_surface_y`) + 1"
										}
									},
									{
										"type": "simple_3d",
										"state": "'minecraft:air'",
										"condition": "`bigglobe:overworld/biased_cavern_noise`(y) > 0.0I",
										"valid": {
											"where": "!surfaceOnly",
											"min_y": "`bigglobe:overworld/cavern_min_y`",
											"max_y": "`bigglobe:overworld/cavern_max_y`"
										}
									},
									{
										"type": "simple_3d",
										"state": "'minecraft:air'",
										"condition": "`bigglobe:overworld/biased_core_noise`(y) < 0.625I",
										"children": [
											{
												"type": "simple_2d",
												"state": "'minecraft:lava[level=0]'",
												"valid": {
													"min_y": "-1024",
													"max_y": "-896"
												}
											}
										],
										"valid": {
											"where": "!surfaceOnly",
											"min_y": "`bigglobe:overworld/core_min_y`",
											"max_y": "`bigglobe:overworld/core_max_y`"
										}
									},
									{
										"type": "simple_2d",
										"state": "'bigglobe:molten_rock_8'",
										"valid": {
											"where": "!surfaceOnly",
											"max_y": "-896"
										}
									}
								]
							},
							{
								"type": "simple_2d",
								"state": "'minecraft:water[level=0]'",
								"valid": {
									"min_y": "ceilInt(`bigglobe:overworld/processed_surface_y`)",
									"max_y": "`bigglobe:overworld/sea_level`"
								}
							},
							{
								"type": "simple_2d",
								"state": "'bigglobe:river_water[level=0]'",
								"before_children": [
									"int y = ceilInt(`bigglobe:overworld/river_water_y`) - 1",
									"if (y > `bigglobe:overworld/processed_surface_y`:",
										"int levels = floorInt(`bigglobe:overworld/river_water_y` % 1.0L * 8.0L)",
										"if (levels > 0:",
											"setBlockState(y, BlockState('bigglobe:river_water', level: 7 - levels))",
										")",
									")"
								],
								"valid": {
									"min_y": "max(ceilInt(`bigglobe:overworld/processed_surface_y`), `bigglobe:overworld/sea_level`)",
									"max_y": "ceilInt(`bigglobe:overworld/river_water_y`) - 1"
								}
							},
							{
								"type": "simple_2d",
								"state": "'bigglobe:cloud'",
								"after_children": [
									"SkylandBounds bounds = `bigglobe:overworld/skyland`.bounds",
									"int maxY = floorInt(bounds.max_y) + 1",
									"int minY = max(floorInt(bounds.min_y), maxY - bounds.surface_depth)",
									"if (maxY > minY:",
										"setBlockStates(minY, maxY, 'minecraft:dirt')",
										"long seed = columnSeed(16x4DED4293C5E459FEUL)",
										"setBlockState(maxY - 1,",
											"seed.if (0.25:",
												"if (`bigglobe:overworld/skyland`.tree_feature != null:",
													"seed.newSeed().if (0.25:",
														"'minecraft:podzol[snowy=false]'",
													")",
													"else (",
														"'bigglobe:overgrown_podzol[snowy=false]'",
													")",
												")",
												"else (",
													"'minecraft:grass_block[snowy=false]'",
												")",
											")",
											"else (",
												"'minecraft:grass_block[snowy=false]'",
											")",
										")",
									")"
								],
								"valid": {
									"where": [
										"if (purpose == 'heightmap': return(false))",
										"SkylandBounds bounds = `bigglobe:overworld/skyland`.bounds",
										"bounds != null && bounds.max_y > bounds.min_y"
									],
									"min_y": "floorInt(`bigglobe:overworld/skyland`.bounds.min_y)",
									"max_y": "floorInt(`bigglobe:overworld/skyland`.bounds.max_y) + 1"
								}
							}
						]
					},
					"feature_dispatcher": {
						"rock_replacers": [
							"bigglobe:overworld/molten_rock",
							"bigglobe:overworld/bedrock",
							"bigglobe:overworld/cobblestone_sprinkle",
							"#bigglobe:overworld/rock_layers",
							"#bigglobe:overworld/ores"
						],
						"raw": [
							"bigglobe:overworld/glaciers",
							"bigglobe:overworld/aura_infused_clouds"
						],
						"normal": [
							"bigglobe:overworld/small_dungeons",
							"bigglobe:overworld/cave_decorators",
							"bigglobe:overworld/swamp_surface",
							"bigglobe:overworld/trees",
							"bigglobe:overworld/bushes",
							"bigglobe:overworld/skyland_trees",
							"bigglobe:overworld/glacier_surface",
							"bigglobe:overworld/medium_foliage",
							"bigglobe:overworld/flowers",
							"bigglobe:overworld/surface_materials",
							"bigglobe:overworld/small_foliage"
						]
					},
					"biome_source": {
						"type": "bigglobe:scripted",
						"value": {
							"script": "`bigglobe:overworld/biome`",
							"all_possible_biomes": "bigglobe:overworld"
						}
					},
					"overriders": "bigglobe:overworld",
					"spawn_point": [
						"`bigglobe:overworld/processed_surface_y` > 0.0L &&",
						"`bigglobe:overworld/surface_temperature`.isBetween[-0.25I, +0.25I] &&",
						"`bigglobe:overworld/surface_foliage` > 0.0L"
					],
					"colors": {
						"grass": {
							"template": "bigglobe:block_color_adjustment",
							"inputs": {
								"COLOR": [
									"getDefaultGrassColor(",
										"1.0L / (exp(-4.0L * `bigglobe:overworld/height_adjusted_temperature`(y)) + 1.0L),",
										"1.0L / (exp(-4.0L * `bigglobe:overworld/height_adjusted_foliage`(y)) + 1.0L)",
									")"
								]
							}
						},
						"foliage": {
							"template": "bigglobe:block_color_adjustment",
							"inputs": {
								"COLOR": [
									"getDefaultFoliageColor(",
										"1.0L / (exp(-4.0L * `bigglobe:overworld/height_adjusted_temperature`(y)) + 1.0L),",
										"1.0L / (exp(-4.0L * `bigglobe:overworld/height_adjusted_foliage`(y)) + 1.0L)",
									")"
								]
							}
						},
						"water": {
							"template": "bigglobe:block_color_adjustment",
							"inputs": {
								"COLOR": [
									"double temperature = 1.0L / (exp(-4.0L * `bigglobe:overworld/height_adjusted_temperature`(y)) + 1.0L)",
									"packI(63, roundInt(temperature * 128.0L + 64.0L), 255)"
								]
							}
						}
					}
				},
				"old_value": {
					"height": {
						"min_y": -1024,
						"max_y":  1024,
						"sea_level": 0,
						"hilliness": {
							"type": "script",
							"script": {
								"template": "bigglobe:grids/sigmoid"
							},
							"min": 0.0,
							"max": 1.0,
							"inputs": {
								"base": {
									"type": "sum",
									"layers": [
										{ "type": "cubic", "scaleX": 4096, "scaleY": 4096, "amplitude": 0.5 },
										{ "type": "cubic", "scaleX": 2048, "scaleY": 2048, "amplitude": 0.25 },
										{ "type": "cubic", "scaleX": 1024, "scaleY": 1024, "amplitude": 0.125 },
										{ "type": "cubic", "scaleX":  512, "scaleY":  512, "amplitude": 0.0625 },
										{ "type": "cubic", "scaleX":  256, "scaleY":  256, "amplitude": 0.03125 },
										{ "type": "cubic", "scaleX":  128, "scaleY":  128, "amplitude": 0.015625 },
										{ "type": "cubic", "scaleX":   64, "scaleY":   64, "amplitude": 0.0078125 }
									]
								}
							}
						},
						"cliffs": {
							"scale": 128.0,
							"cliffiness": {
								"type": "script",
								"script": {
									"template": "bigglobe:grids/sigmoid"
								},
								"min": 0.0,
								"max": 1.0,
								"inputs": {
									"base": {
										"type": "sum",
										"layers": [
											{ "type": "cubic", "scaleX": 1024, "scaleY": 1024, "amplitude": 0.5 },
											{ "type": "cubic", "scaleX":  512, "scaleY":  512, "amplitude": 0.25 },
											{ "type": "cubic", "scaleX":  256, "scaleY":  256, "amplitude": 0.125 },
											{ "type": "cubic", "scaleX":  128, "scaleY":  128, "amplitude": 0.0625 },
											{ "type": "cubic", "scaleX":   64, "scaleY":   64, "amplitude": 0.03125 }
										]
									}
								}
							},
							"shelf_height": {
								"type": "script",
								"min": -1.0,
								"max":  1.0,
								"script": [
									"double curve(double value:",
										"value /= 1.0 - 0.125",
										"return(1 - 2 * (1 - (1 - abs(value)) ^ 2) ^ 2)",
									")",

									"return(",
										"+ curve(layer1) * 0.5",
										"- curve(layer2) * 0.25",
										"+ curve(layer3) * 0.125",
										"- curve(layer4) * 0.0625",
									")"
								],
								"inputs": {
									"layer1": {
										"type": "sum",
										"layers": [
											{ "type": "smooth", "scaleX": 512, "scaleY": 512, "amplitude": 0.5 },
											{ "type": "smooth", "scaleX": 256, "scaleY": 256, "amplitude": 0.25 },
											{ "type": "smooth", "scaleX": 128, "scaleY": 128, "amplitude": 0.125 }
										]
									},
									"layer2": {
										"type": "sum",
										"layers": [
											{ "type": "smooth", "scaleX": 256, "scaleY": 256, "amplitude": 0.5 },
											{ "type": "smooth", "scaleX": 128, "scaleY": 128, "amplitude": 0.25 },
											{ "type": "smooth", "scaleX":  64, "scaleY":  64, "amplitude": 0.125 }
										]
									},
									"layer3": {
										"type": "sum",
										"layers": [
											{ "type": "smooth", "scaleX": 128, "scaleY": 128, "amplitude": 0.5 },
											{ "type": "smooth", "scaleX":  64, "scaleY":  64, "amplitude": 0.25 },
											{ "type": "smooth", "scaleX":  32, "scaleY":  32, "amplitude": 0.125 }
										]
									},
									"layer4": {
										"type": "sum",
										"layers": [
											{ "type": "smooth", "scaleX": 64, "scaleY": 64, "amplitude": 0.5 },
											{ "type": "smooth", "scaleX": 32, "scaleY": 32, "amplitude": 0.25 },
											{ "type": "smooth", "scaleX": 16, "scaleY": 16, "amplitude": 0.125 }
										]
									}
								}
							}
						},
						"erosion": [
							{
								"amplitude": 512.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 4096, "scaleY": 4096, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX": 2048, "scaleY": 2048, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX": 1024, "scaleY": 1024, "amplitude": 0.125 },
										{ "type": "smooth", "scaleX":  512, "scaleY":  512, "amplitude": 0.0625 },
										{ "type": "smooth", "scaleX":  256, "scaleY":  256, "amplitude": 0.03125 },
										{ "type": "smooth", "scaleX":  128, "scaleY":  128, "amplitude": 0.015625 },
										{ "type": "smooth", "scaleX":   64, "scaleY":   64, "amplitude": 0.0078125 }
									]
								}
							},
							{
								"amplitude": -256.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 2048, "scaleY": 2048, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX": 1024, "scaleY": 1024, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX":  512, "scaleY":  512, "amplitude": 0.125 },
										{ "type": "smooth", "scaleX":  256, "scaleY":  256, "amplitude": 0.0625 },
										{ "type": "smooth", "scaleX":  128, "scaleY":  128, "amplitude": 0.03125 },
										{ "type": "smooth", "scaleX":   64, "scaleY":   64, "amplitude": 0.015625 }
									]
								}
							},
							{
								"amplitude": 128.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 1024, "scaleY": 1024, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX":  512, "scaleY":  512, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX":  256, "scaleY":  256, "amplitude": 0.125 },
										{ "type": "smooth", "scaleX":  128, "scaleY":  128, "amplitude": 0.0625 },
										{ "type": "smooth", "scaleX":   64, "scaleY":   64, "amplitude": 0.03125 },
										{ "type": "smooth", "scaleX":   32, "scaleY":   32, "amplitude": 0.015625 }
									]
								}
							},
							{
								"amplitude": -64.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 512, "scaleY": 512, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX": 256, "scaleY": 256, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX": 128, "scaleY": 128, "amplitude": 0.125 },
										{ "type": "smooth", "scaleX":  64, "scaleY":  64, "amplitude": 0.0625 },
										{ "type": "smooth", "scaleX":  32, "scaleY":  32, "amplitude": 0.03125 }
									]
								}
							},
							{
								"amplitude": 32.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 256, "scaleY": 256, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX": 128, "scaleY": 128, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX":  64, "scaleY":  64, "amplitude": 0.125 },
										{ "type": "smooth", "scaleX":  32, "scaleY":  32, "amplitude": 0.0625 },
										{ "type": "smooth", "scaleX":  16, "scaleY":  16, "amplitude": 0.03125 }
									]
								}
							},
							{
								"amplitude": -16.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 128, "scaleY": 128, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX":  64, "scaleY":  64, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX":  32, "scaleY":  32, "amplitude": 0.125 },
										{ "type": "smooth", "scaleX":  16, "scaleY":  16, "amplitude": 0.0625 }
									]
								}
							},
							{
								"amplitude": 8.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 64, "scaleY": 64, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX": 32, "scaleY": 32, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX": 16, "scaleY": 16, "amplitude": 0.125 },
										{ "type": "smooth", "scaleX":  8, "scaleY":  8, "amplitude": 0.0625 }
									]
								}
							},
							{
								"amplitude": -4.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 32, "scaleY": 32, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX": 16, "scaleY": 16, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX":  8, "scaleY":  8, "amplitude": 0.125 }
									]
								}
							},
							{
								"amplitude": 2.0,
								"grid": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 16, "scaleY": 16, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX":  8, "scaleY":  8, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX":  4, "scaleY":  4, "amplitude": 0.125 }
									]
								}
							}
						],
						"snow_height": "y + (-2.0L + y * 0.015625L + `overworld/temperature` * -4.0L)"
					},



					"temperature": {
						"noise": {
							"type": "sum",
							"layers": [
								{ "type": "cubic", "scaleX": 2048, "scaleY": 2048, "amplitude": 1.0 },
								{ "type": "cubic", "scaleX": 1024, "scaleY": 1024, "amplitude": 0.5 },
								{ "type": "cubic", "scaleX":  512, "scaleY":  512, "amplitude": 0.25 },
								{ "type": "cubic", "scaleX":  256, "scaleY":  256, "amplitude": 0.125 },
								{ "type": "cubic", "scaleX":  128, "scaleY":  128, "amplitude": 0.0625 },
								{ "type": "cubic", "scaleX":   64, "scaleY":   64, "amplitude": 0.03125 },
								{ "type": "cubic", "scaleX":   32, "scaleY":   32, "amplitude": 0.015625 }
							]
						},
						"height_adjustment": "temperature - (y - sea_level) / 512.0L"
					},



					"foliage": {
						"noise": {
							"type": "sum",
							"layers": [
								{ "type": "cubic", "scaleX": 1024, "scaleY": 1024, "amplitude": 0.5    },
								{ "type": "cubic", "scaleX":  512, "scaleY":  512, "amplitude": 0.25   },
								{ "type": "cubic", "scaleX":  256, "scaleY":  256, "amplitude": 0.125  },
								{ "type": "cubic", "scaleX":  128, "scaleY":  128, "amplitude": 0.25   },
								{ "type": "cubic", "scaleX":   64, "scaleY":   64, "amplitude": 0.25   },
								{ "type": "cubic", "scaleX":   32, "scaleY":   32, "amplitude": 0.125  },
								{ "type": "cubic", "scaleX":   16, "scaleY":   16, "amplitude": 0.0625 }
							]
						},
						"height_adjustment": "foliage - abs(y - sea_level) / 512.0L"
					},



					"magicalness": {
						"noise": {
							"type": "sum",
							"layers": [
								{ "type": "cubic", "scaleX": 512, "scaleY": 512, "amplitude": 1.0 },
								{ "type": "cubic", "scaleX": 256, "scaleY": 256, "amplitude": 0.5 },
								{ "type": "cubic", "scaleX": 128, "scaleY": 128, "amplitude": 0.25 },
								{ "type": "cubic", "scaleX":  64, "scaleY":  64, "amplitude": 0.125 },
								{ "type": "cubic", "scaleX":  32, "scaleY":  32, "amplitude": 0.0625 },
								{ "type": "cubic", "scaleX":  16, "scaleY":  16, "amplitude": 0.03125 }
							]
						}
					},



					"surface": {
						"primary_surface_depth": [
							"return(",
								"+ 5.0L ;base amount",
								"+ random.nextDouble(-1.0L, +1.0L) ;randomness",
									"* 4.0L / (slope_squared + 2.0L) ;less randomness when slope is high",
								"- slope_squared * 3.0L ;less surface overall when slope is high",
								"- (max_y - `overworld/sea_level`) / 512.0L ;less surface at higher Y levels",
								"+ `overworld/foliage` * 2.0L ;more surface when foliage is high",
							")"
						]
					},



					"glaciers": {
						"cracks": {
							"distance": 32,
							"variation": 24
						},
						"crack_threshold": [
							"min(",
								"unmixLinear(-0.25L, -0.5L, `overworld/temperature`),",
								"unmixLinear(`overworld/sea_level`, `overworld/sea_level` - `overworld/hilliness` * 128.0L, max_y)",
							")"
						],
						"bottom_height": {
							"type": "sum",
							"layers": [
								{ "type": "constant", "value": -4.0 },
								{ "type": "cubic", "scaleX": 64, "scaleY": 64, "amplitude": 2.0 },
								{ "type": "cubic", "scaleX": 32, "scaleY": 32, "amplitude": 1.0 },
								{ "type": "cubic", "scaleX": 16, "scaleY": 16, "amplitude": 0.5 }
							]
						},
						"top_height": {
							"type": "script",
							"min": 0.0,
							"max": 64.0,
							"script": [
								"double height = `overworld/glacier_bottom_height` + 8.0L",
								"double magicalness = `overworld/magicalness`",
								"double innerness = `overworld/glacier_crack_threshold` - 1.0L",
								"if (magicalness > 0.0L && innerness > 0.0L:",
									"magicalness = 1.0L - 0.0625L / (magicalness ^ 2 + 0.0625L)",
									"innerness = 1.0L - 0.25L / (innerness ^ 2 + 0.25L)",
									"maze = 24.0L - 24.0L / (maze ^ 4 + 1.0L)",
									"height += maze * magicalness * innerness",
								")",
								"return(height)"
							],
							"inputs": {
								"maze": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 64, "scaleY": 64, "amplitude": 4.0 },
										{ "type": "smooth", "scaleX": 32, "scaleY": 32, "amplitude": 1.6 },
										{ "type": "smooth", "scaleX": 16, "scaleY": 16, "amplitude": 0.64 },
										{ "type": "smooth", "scaleX":  8, "scaleY":  8, "amplitude": 0.256 },
										{ "type": "smooth", "scaleX":  4, "scaleY":  4, "amplitude": 0.1024 }
									]
								}
							}
						},
						"states": [
							[ "minecraft:ice" ],
							[ "minecraft:blue_ice", "minecraft:ice" ],
							[ "minecraft:blue_ice" ],
							[ "minecraft:packed_ice", "minecraft:blue_ice" ],
							[ "minecraft:packed_ice" ],
							[ "minecraft:snow_block", "minecraft:packed_ice" ],
							[ "minecraft:snow_block" ]
						]
					},



					"underground": {
						"cobble_per_section": 512,
						"caves": {
							"placement": {
								"distance": 512,
								"variation": 384
							}
						},
						"deep_caverns": {
							"placement": {
								"distance": 1024,
								"variation": 768
							}
						}
					},



					"skylands": {
						"placement": {
							"distance": 1024,
							"variation": 768
						}
					}



				}
			}
		},



		"minecraft:the_nether": {
			"type": "bigglobe:nether",
			"generator": {
				"type": "bigglobe:scripted",
				"value": {
					"reload_dimension": "minecraft:the_nether",
					"height": {
						"min_y": 0,
						"max_y": 1024
					},
					"layer": {
						"state": "`bigglobe:nether/bubble`.filler",
						"children": [
							{
								"type": "simple_3d",
								"state": "'minecraft:air'",
								"condition": "`bigglobe:nether/bubble`.noise(y) < 0.5I",
								"valid": {
									"min_y": "`bigglobe:nether/min_y` + 16",
									"max_y": "`bigglobe:nether/max_y` - 16"
								},
								"before_children": [
									"BlockState state = `bigglobe:nether/bubble`.surface_state",
									"if (state != null:",
										"int minIteration = `bigglobe:nether/mid_y` - `bigglobe:nether/cavern_fade_radius`",
										"int maxIteration = `bigglobe:nether/max_y`",
										"for (int y = maxIteration, (y := getBottomOfSegment(y - 1)) >= minIteration, noop:",
											"if (",
												"getBlockState(y) == BlockState('minecraft:air') &&",
												"columnSeed(16x783DBB66AE78F478UL).newSeed(y).nextBoolean(",
													"unmixSmoother(",
														"double(`bigglobe:nether/mid_y` - `bigglobe:nether/cavern_fade_radius`),",
														"double(`bigglobe:nether/mid_y`),",
														"double(y)",
													")",
												")",
											":",
												"setBlockState(y - 1, state)",
											")",
										")",
									")"
								],
								"children": [
									{
										"type": "simple_2d",
										"state": "`bigglobe:nether/bubble`.lava_fluid",
										"valid": {
											"min_y": "`bigglobe:nether/min_y`",
											"max_y": "`bigglobe:nether/bubble`.lava_level"
										}
									}
								]
							}
						]
					},
					"feature_dispatcher": {
						"rock_replacers": [
							"bigglobe:nether/lower_bedrock",
							"bigglobe:nether/upper_bedrock",
							"#bigglobe:nether/rock_layers",
							"#bigglobe:nether/ores"
						],
						"raw": [],
						"normal": [
							"bigglobe:nether/lava_surface",
							"bigglobe:nether/bubble_decorator"
						]
					},
					"biome_source": {
						"type": "bigglobe:scripted",
						"value": {
							"script": "`bigglobe:nether/bubble`.biome",
							"all_possible_biomes": "bigglobe:nether"
						}
					},
					"overriders": "bigglobe:nether"
				},
				"old_value": {
					"min_y": 0,
					"max_y": 1024,
					"biome_placement": {
						"distance": 1024,
						"variation": 768
					}
				}
			}
		},



		"minecraft:the_end": {
			"type": "bigglobe:end",
			"generator": {
				"type": "bigglobe:scripted",
				"value": {
					"reload_dimension": "minecraft:the_end",
					"height": {
						"min_y": -512,
						"max_y":  512
					},
					"layer": {
						"state": "'minecraft:air'",
						"children": [
							{
								"type": "simple_3d",
								"state": "'bigglobe:void_cloud'",
								"condition": "`bigglobe:end/lower_ring_cloud_sdf` > 0.0I",
								"valid": {
									"where": [
										"if (purpose == 'heightmap': return(false))",
										"`bigglobe:end/warp_radius`.isBetween(`bigglobe:end/ring_cloud_min_radius`, `bigglobe:end/ring_cloud_max_radius`)"
									],
									"min_y": " ceilInt(`bigglobe:end/mountain_center` - `bigglobe:end/ring_cloud_center_offset` - `bigglobe:end/ring_cloud_thickness`)",
									"max_y": "floorInt(`bigglobe:end/mountain_center` - `bigglobe:end/ring_cloud_center_offset` + `bigglobe:end/ring_cloud_thickness`)"
								}
							},
							{
								"type": "simple_3d",
								"state": "'bigglobe:void_cloud'",
								"condition": "`bigglobe:end/lower_bridge_cloud_sdf` > 0.0I",
								"valid": {
									"where": [
										"if (purpose == 'heightmap': return(false))",
										"`bigglobe:end/warp_radius` > `bigglobe:end/bridge_cloud_min_radius`"
									],
									"min_y": " ceilInt(`bigglobe:end/mountain_center` - `bigglobe:end/bridge_cloud_center_offset` - `bigglobe:end/bridge_cloud_thickness`)",
									"max_y": "floorInt(`bigglobe:end/mountain_center` - `bigglobe:end/bridge_cloud_center_offset` + `bigglobe:end/bridge_cloud_thickness`)"
								}
							},
							{
								"type": "simple_2d",
								"state": "'minecraft:end_stone'",
								"after_children": [
									"EndSurface surface = `bigglobe:end/surface`",
									"if (surface.surface_depth > 0:",
										"if (surface.surface_depth > 1:",
											"setBlockStates(",
												"max(",
													"floorInt(`bigglobe:end/mountain_max_y`) + 1 - surface.surface_depth,",
													"floorInt(`bigglobe:end/mountain_min_y`)",
												"),",
												"floorInt(`bigglobe:end/mountain_max_y`),",
												"surface.subsurface_state",
											")",
										")",
										"setBlockState(floorInt(`bigglobe:end/mountain_max_y`), surface.surface_state)",
									")"
								],
								"valid": {
									"where": "`bigglobe:end/has_mountain`",
									"min_y": "floorInt(`bigglobe:end/mountain_min_y`)",
									"max_y": "floorInt(`bigglobe:end/mountain_max_y`) + 1"
								}
							},
							{
								"type": "simple_3d",
								"state": "'minecraft:end_stone'",
								"condition": "`bigglobe:end/nest_sdf` > 0.0I",
								"valid": {
									"where": "`bigglobe:end/distance_to_origin` < 148.0L",
									"min_y": "28",
									"max_y": "152"
								}
							},
							{
								"type": "simple_3d",
								"state": "'bigglobe:void_cloud'",
								"condition": "`bigglobe:end/upper_ring_cloud_sdf` > 0.0I",
								"valid": {
									"where": [
										"if (purpose == 'heightmap': return(false))",
										"`bigglobe:end/warp_radius`.isBetween(`bigglobe:end/ring_cloud_min_radius`, `bigglobe:end/ring_cloud_max_radius`)"
									],
									"min_y": " ceilInt(`bigglobe:end/mountain_center` + `bigglobe:end/ring_cloud_center_offset` - `bigglobe:end/ring_cloud_thickness`)",
									"max_y": "floorInt(`bigglobe:end/mountain_center` + `bigglobe:end/ring_cloud_center_offset` + `bigglobe:end/ring_cloud_thickness`)"
								}
							},
							{
								"type": "simple_3d",
								"state": "'bigglobe:void_cloud'",
								"condition": "`bigglobe:end/upper_bridge_cloud_sdf` > 0.0I",
								"valid": {
									"where": [
										"if (purpose == 'heightmap': return(false))",
										"`bigglobe:end/warp_radius` > `bigglobe:end/bridge_cloud_min_radius`"
									],
									"min_y": " ceilInt(`bigglobe:end/mountain_center` + `bigglobe:end/bridge_cloud_center_offset` - `bigglobe:end/bridge_cloud_thickness`)",
									"max_y": "floorInt(`bigglobe:end/mountain_center` + `bigglobe:end/bridge_cloud_center_offset` + `bigglobe:end/bridge_cloud_thickness`)"
								}
							}
						]
					},
					"feature_dispatcher": {
						"rock_replacers": [
							"#bigglobe:end/rock_layers",
							"#bigglobe:end/ores"
						],
						"raw": [
							"bigglobe:end/aura_infused_void_clouds"
						],
						"normal": [
							"bigglobe:end/nest_spikes",
							"bigglobe:end/outer_island_spikes",
							"bigglobe:end/outer_island_foliage"
						]
					},
					"biome_source": {
						"type": "bigglobe:scripted",
						"value": {
							"script": "`bigglobe:end/surface`.biome",
							"all_possible_biomes": "bigglobe:end"
						}
					},
					"overriders": "bigglobe:end",
					"end_overrides": {
						"spawning": {
							"location": [ 96, 67, 0 ],
							"obsidian_platform": false
						},
						"inner_gateways": {
							"radius": 84.0,
							"height": 80
						},
						"outer_gateways": {
							"min_radius": 512,
							"max_radius": 4096,
							"step": 32,
							"condition": "`bigglobe:end/has_mountain`"
						}
					}
				},
				"old_value": {
					"min_y": -512,
					"max_y":  512,
					"warp_x": { "type": "sine_sum", "scale": 512.0, "amplitude": 1.0, "iterations": 16 },
					"warp_z": { "type": "sine_sum", "scale": 512.0, "amplitude": 1.0, "iterations": 16 },
					"nest": {
						"shape": {
							"type": "script",
							"min": -9999.0,
							"max": 1.875,
							"script": [
								"double relativeX = x / 128.0L",
								"double relativeY = (y - 103.5) / 64.0L",
								"double relativeZ = z / 128.0L",
								"double width = cosAngle * unmixSmooth(-0.75, -0.5, relativeY)",
								"double centerRadius = relativeX ^ 2 + relativeY ^ 2 + relativeZ ^ 2",
								"double edgeRadius = (1.0L - centerRadius) ^ 2",
								"double result = edgeRadius * 16.0L + relativeY + width / sqrt(2.0L)",
								"double roughness = noise * (relativeY * -0.5L + 0.5L)",
								"return(roughness - result)"
							],
							"inputs": {
								"noise": {
									"type": "sum",
									"layers": [
										{ "type": "smooth", "scaleX": 32, "scaleY": 32, "scaleZ": 32, "amplitude": 0.5 },
										{ "type": "smooth", "scaleX": 16, "scaleY": 16, "scaleZ": 16, "amplitude": 0.25 },
										{ "type": "smooth", "scaleX":  8, "scaleY":  8, "scaleZ":  8, "amplitude": 0.125 }
									]
								},
								"cosAngle": {
									"type": "project_xz",
									"2D_grid": {
										"type": "script",
										"min": -1.0,
										"max":  1.0,
										"script": "cos(`end/angle_to_origin` * 10.0L)"
									}
								}
							}
						},
						"min_y": 28,
						"max_y": 152,
						"max_radius": 148,
						"spawn_location": [ 96, 67, 0 ],
						"spawn_obsidian_platform": false,
						"gateway_radius": 84.0,
						"gateway_height": 80,
						"floor_decorator": "bigglobe:end/nest_floor",
						"ceiling_decorator": "bigglobe:end/nest_ceiling"
					},
					"mountains": {
						"center_y": {
							"type": "sum",
							"layers": [
								{ "type": "cubic", "scaleX": 1024.0, "scaleY": 1024.0, "amplitude": 64.0 },
								{ "type": "cubic", "scaleX":  512.0, "scaleY":  512.0, "amplitude": 32.0 },
								{ "type": "cubic", "scaleX":  256.0, "scaleY":  256.0, "amplitude": 16.0 },
								{ "type": "cubic", "scaleX":  128.0, "scaleY":  128.0, "amplitude":  8.0 },
								{ "type": "cubic", "scaleX":   64.0, "scaleY":   64.0, "amplitude":  4.0 },
								{ "type": "cubic", "scaleX":   32.0, "scaleY":   32.0, "amplitude":  2.0 },
								{ "type": "cubic", "scaleX":   16.0, "scaleY":   16.0, "amplitude":  1.0 }
							]
						},
						"thickness": [
							"double radius = `end/warp_radius`",
							"double base = exp2(-4.0L * radius) * 384.0L - 12.0L",
							"double noise = sin(`end/warp_angle` * 8.0L + log2(radius) * 8.0L)",
							"double amplitude = radius * exp2(-4.0L * radius) * 64.0L",
							"double result = base + noise * amplitude",
							"result *= 1.0 - unmixClamp(1024.0L, 512.0L, `end/distance_to_origin`) ^ 2",
							"return(result)"
						],
						"foliage": {
							"type": "sum",
							"layers": [
								{ "type": "cubic", "scaleX": 512, "scaleY": 512, "amplitude": 0.5      },
								{ "type": "cubic", "scaleX": 256, "scaleY": 256, "amplitude": 0.25     },
								{ "type": "cubic", "scaleX": 128, "scaleY": 128, "amplitude": 0.125    },
								{ "type": "cubic", "scaleX":  64, "scaleY":  64, "amplitude": 0.0625   },
								{ "type": "cubic", "scaleX":  32, "scaleY":  32, "amplitude": 0.03125  },
								{ "type": "cubic", "scaleX":  16, "scaleY":  16, "amplitude": 0.015625 },
								{
									"type": "script",
									"min": -6.0,
									"max": 0.0,
									"script": "`end/mountain_thickness` / -64.0L"
								}
							]
						},
						"primary_surface_depth": "1.0L",
						"floor_decorator": "bigglobe:end/mountain_floor",
						"ceiling_decorator": "bigglobe:end/mountain_ceiling"
					},
					"ring_clouds": {
						"noise": {
							"type": "sum",
							"layers": [
								{ "type": "constant", "value": 0.5 },
								{ "type": "smooth", "scaleX": 64, "scaleY": 64, "scaleZ": 64, "amplitude": 0.25 },
								{ "type": "smooth", "scaleX": 32, "scaleY": 32, "scaleZ": 32, "amplitude": 0.1 },
								{ "type": "smooth", "scaleX": 16, "scaleY": 16, "scaleZ": 16, "amplitude": 0.04 },
								{ "type": "smooth", "scaleX":  8, "scaleY":  8, "scaleZ":  8, "amplitude": 0.016 },
								{ "type": "smooth", "scaleX":  4, "scaleY":  4, "scaleZ":  4, "amplitude": 0.0064 },
								{ "type": "worley", "scale":  64, "amplitude": -1.0  },
								{ "type": "worley", "scale":  32, "amplitude": -0.5  },
								{ "type": "worley", "scale":  16, "amplitude": -0.25 }
							]
						},
						"center_y": "192.0",
						"min_radius": 0.375,
						"max_radius": 0.625,
						"vertical_thickness": 64.0,
						"lower_floor_decorator":   "bigglobe:end/ring_cloud_lower_floor",
						"lower_ceiling_decorator": "bigglobe:end/ring_cloud_lower_ceiling",
						"upper_floor_decorator":   "bigglobe:end/ring_cloud_upper_floor",
						"upper_ceiling_decorator": "bigglobe:end/ring_cloud_upper_ceiling"
					},
					"bridge_clouds": {
						"noise": {
							"type": "sum",
							"layers": [
								{ "type": "constant", "value": 0.5 },
								{ "type": "smooth", "scaleX": 64, "scaleY": 64, "scaleZ": 64, "amplitude": 0.25 },
								{ "type": "smooth", "scaleX": 32, "scaleY": 32, "scaleZ": 32, "amplitude": 0.1 },
								{ "type": "smooth", "scaleX": 16, "scaleY": 16, "scaleZ": 16, "amplitude": 0.04 },
								{ "type": "smooth", "scaleX":  8, "scaleY":  8, "scaleZ":  8, "amplitude": 0.016 },
								{ "type": "smooth", "scaleX":  4, "scaleY":  4, "scaleZ":  4, "amplitude": 0.0064 },
								{ "type": "worley", "scale":  64, "amplitude": -1.0  },
								{ "type": "worley", "scale":  32, "amplitude": -0.5  },
								{ "type": "worley", "scale":  16, "amplitude": -0.25 }
							]
						},
						"count": 32,
						"center_y": "(1.0L - exp(-0.5 * `end/warp_radius`)) * 256.0 + 159.0",
						"min_radius": 0.625,
						"mid_radius": 1.0,
						"vertical_thickness": 64.0,
						"lower_floor_decorator":   "bigglobe:end/bridge_cloud_lower_floor",
						"lower_ceiling_decorator": "bigglobe:end/bridge_cloud_lower_ceiling",
						"upper_floor_decorator":   "bigglobe:end/bridge_cloud_upper_floor",
						"upper_ceiling_decorator": "bigglobe:end/bridge_cloud_upper_ceiling"
					}
				}
			}
		}
	}
}