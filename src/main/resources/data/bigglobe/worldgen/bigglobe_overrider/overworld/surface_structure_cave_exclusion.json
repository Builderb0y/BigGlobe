{
	"type": "column_value",
	"feature_generation": false,
	"script": [
		"if (surfaceOnly: return())",
		"void excludeSurface(double amount:",
			"if (amount > 0.0L:",
				"double basicY     = `bigglobe:overworld/basic_surface_y`",
				"double processedY = `bigglobe:overworld/processed_surface_y`",
				"for (int y in range(floorInt(basicY - 16.0L), ceilInt(processedY)):",
					"double amountForY = unmixLinear(basicY - 16.0L, basicY, y)",
					"`bigglobe:overworld/cave`.noise(y) += float(amountForY ^ 2 * amount)",
				")",
			")",
		")",
		"for (StructureStart start in structures:",
			"if (start.structure.type == StructureType('minecraft:jigsaw') && start.structure.generationStep == 'surface_structures':",
				"for (StructurePiece piece in start.pieces:",
					"int diameter = max(piece.sizeX, piece.sizeZ) + 1",
					"double radius = diameter * 0.5L",
					"double distance = distanceToCircle(piece, radius)",
					"double mixLevel = smooth(1.0 - distance / min(radius, 16.0L))",
					"excludeSurface(mixLevel)",
				")",
			")",
			"else if (start.structure.isIn('bigglobe:lakes'):",
				"double distance = distanceToCircle(start)",
				"double mixLevel = smooth(1.0L - distance * 0.0625L)",
				"excludeSurface(mixLevel)",
			")",
			"else if (start.structure == Structure('bigglobe:campfire'):",
				"int limit = min(2, start.pieces.size)",
				"for (int index = 0, index < limit, ++index:",
					"StructurePiece piece = start.pieces.(index)",
					"double distance = distanceToCircle(piece, 4.0L)",
					"double mixLevel = smooth(1.0L - distance * 0.125L)",
					"excludeSurface(mixLevel)",
				")",
			")",
			"else if (start.structure == Structure('bigglobe:small_house'):",
				"StructurePiece piece = start.pieces.(0)",
				"double distance = distanceToCircle(piece, 4.0L)",
				"double mixLevel = smooth(1.0L - distance * 0.0625L)",
				"excludeSurface(mixLevel)",
				"if (start.pieces.size > 1:",
					"piece = start.pieces.(1)",
					"distance = distanceToSquare(piece)",
					"mixLevel = smooth(1.0L - distance * 0.0625L)",
					"excludeSurface(mixLevel)",
				")",
			")",
			"else if (",
				"start.structure == Structure('bigglobe:medium_house') ||",
				"start.structure == Structure('bigglobe:large_house')",
			":",
				"double distance = distanceToSquare(start)",
				"double mixLevel = smooth(1.0L - distance * 0.0625L)",
				"excludeSurface(mixLevel)",
			")",
			"else if (",
				"start.structure == Structure('bigglobe:windmill') ||",
				"start.structure == Structure('bigglobe:well')",
			":",
				"double distance = distanceToCircle(start, 4.0L)",
				"excludeSurface(smooth(1.0L - distance * 0.125L))",
			")",
			"else if (",
				"start.structure.type == StructureType('minecraft:desert_pyramid') ||",
				"start.structure.type == StructureType('bigglobe:bigger_desert_pyramid') ||",
				"start.structure.type == StructureType('minecraft:woodland_mansion') ||",
				"start.structure      == Structure    ('bigglobe:log_cabin')",
			":",
				"double distance = distanceToSquare(start)",
				"excludeSurface(smooth(1.0L - distance * 0.125L))",
			")",
		")"
	]
}