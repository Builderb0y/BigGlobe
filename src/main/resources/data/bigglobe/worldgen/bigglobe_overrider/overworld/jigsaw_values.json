{
	"type": "column_value",
	"script": [
		"for (StructureStart start in structures:",
			"if (start.structure.type == StructureType('minecraft:jigsaw') && start.structure.generationStep == 'surface_structures':",
				"for (StructurePiece piece in start.pieces:",
					"if (piece.hasPreferredTerrainHeight:",
						"int diameter = max(piece.sizeX, piece.sizeZ) + 1",
						"double radius = diameter * 0.5L",
						"double distance = distanceToCircle(piece, radius)",
						"double mixLevel = smooth(1.0 - distance / min(radius, 16.0L))",
						"double newY = piece.preferredTerrainHeight - 0.5L",
						"`bigglobe:overworld/surface_y` = mixLinear(`bigglobe:overworld/surface_y`, newY, mixLevel)",
						"`bigglobe:overworld/snow_y` = mixLinear(`bigglobe:overworld/snow_y`, newY - 1.0L, mixLevel)",
					")",
					"else (",
						"double distance = distanceToSquare(piece)",
						"double mixLevel = smooth(1.0L - distance * 0.125L)",
						"`bigglobe:overworld/snow_y` = mixLinear(`bigglobe:overworld/snow_y`, `bigglobe:overworld/surface_y` - 1.0L, mixLevel)",
					")",
					"`bigglobe:overworld/surface_foliage` *= float(smooth(distanceToSquare(piece) * 0.0625L))",
				")",
			")",
		")"
	]
}