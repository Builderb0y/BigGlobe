{
	"placement": [
		";main floor and walls",
		"BlockState mainBlock = random.if ('minecraft:white_terracotta') else ('minecraft:light_gray_terracotta')",
		"for (int y in range[-1, 16]:",
			"double radius = mixLinear(3.5L, 1.0L, max(y, 0) * 0.0625L)",
			"double radius2 = radius ^ 2",
			"int floorRadius = int(radius)",
			"for (int z in range[-floorRadius, floorRadius]:",
				"for (int x in range[-floorRadius, floorRadius]:",
					"if (",
						"x ^ 2 + z ^ 2 <= radius2 && (",
							"y < 0 ||",
							"(x + sign(x)) ^ 2 + z ^ 2 > radius2 ||",
							"x ^ 2 + (z + sign(z)) ^ 2 > radius2",
						")",
					":",
						"setBlockState(x, y, z, compare (y:",
							"case (<: 'minecraft:smooth_stone')",
							"case (=: 'minecraft:cobblestone')",
							"case (>: mainBlock)",
						"))",
					")",
				")",
			")",
		")",

		";windmill (wool)",
		"double angle = random.nextDouble(-pi / 4.0L, +pi / 4.0L)",
		"double cosAngle = cos(angle)",
		"double sinAngle = sin(angle)",
		"for (int y in range[-8, +8]:",
			"for (int z in range[-8, +8]:",
				";[ cos, sin] [z]",
				";[-sin, cos] [y]",
				"double rotatedZ =  cosAngle * z + sinAngle * y",
				"double rotatedY = -sinAngle * z + cosAngle * y",
				"if (",
					"rotatedZ.isBetween[-8.0L, +8.0L] &&",
					"rotatedY.isBetween[-8.0L, +8.0L] && (",
						"(rotatedZ * -sign(rotatedY)).isBetween(0.0L, 3.0L] ||",
						"(rotatedY *  sign(rotatedZ)).isBetween(0.0L, 3.0L]",
					")",
				":",
					"setBlockState(5, y + 15, z, 'minecraft:white_wool')",
				")",
			")",
		")",

		";windmill (logs)",
		"double step = 1.0L / max(abs(cosAngle), abs(sinAngle))",
		"for (double dist = step, dist < 7.99, dist += step:",
			"setBlockState(5, roundInt( sinAngle * dist + 15.0L), roundInt( cosAngle * dist), 'minecraft:oak_log[axis=z]')",
			"setBlockState(5, roundInt( cosAngle * dist + 15.0L), roundInt(-sinAngle * dist), 'minecraft:oak_log[axis=y]')",
			"setBlockState(5, roundInt(-sinAngle * dist + 15.0L), roundInt(-cosAngle * dist), 'minecraft:oak_log[axis=z]')",
			"setBlockState(5, roundInt(-cosAngle * dist + 15.0L), roundInt( sinAngle * dist), 'minecraft:oak_log[axis=y]')",
		")",

		";connect windmill to main structure",
		"fillBlockState(-2, 15, 0, 5, 15, 0, 'minecraft:oak_log[axis=x]')",

		";vertical pillar of logs on interior",
		"fillBlockState(0, 0, 0, 0, 14, 0, 'minecraft:oak_log[axis=y]')",

		";door",
		"setBlockState(3, 0, 0, 'minecraft:oak_door[facing=west,half=lower,hinge=left,open=false,powered=false]')",
		"setBlockState(3, 1, 0, 'minecraft:oak_door[facing=west,half=upper,hinge=left,open=false,powered=false]')",

		";interior",
		"setBlockState(-2, 0,  1, 'minecraft:stonecutter[facing=north]')",
		"setBlockState(-2, 0, -1, 'minecraft:grindstone[face=floor,facing=west]')",
		"Coordinator.new().symmetrify('IDENTITY', 'ROTATE_90', 'ROTATE_270').setBlockState(-2, 1, 0, 'minecraft:wall_torch[facing=east]')",

		";summon villager",
		"summon(1.5L, 0.0L, 0.5L, 'minecraft:villager')"
	]
}