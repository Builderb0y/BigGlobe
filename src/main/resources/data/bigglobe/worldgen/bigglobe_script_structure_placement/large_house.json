{
	"placement": [
		"String randomColor(:",
			"random.switch(",
				"'white',      'orange', 'magenta', 'light_blue',",
				"'yellow',     'lime',   'pink',    'gray',",
				"'light_gray', 'cyan',   'purple',  'blue',",
				"'brown',      'green',  'red',     'black'",
			")",
		")",
		"WoodPalette palette = WoodPalette(data.palette.asString())",
		"BlockState log = palette.logState(axis: 'y')",
		"BlockState planks = palette.planksState()",
		"BlockState slab = palette.slabState(type: 'bottom', waterlogged: false)",
		"BlockState stairs = palette.stairsState(facing: 'north', half: 'bottom', shape: 'straight', waterlogged: false)",
		"Block fence = palette.fenceBlock",

		"Coordinator root = new()",
		"Coordinator rotate4 = root.rotate4x90()",
		"Coordinator rotate8 = rotate4.flip2X()",

		";floor",
		"fillBlockState(-5, 0, -5, 5, 0, 5, 'minecraft:white_wool')",
		"rotate8.setBlockStateLine(6, 0, 3, 0, 0, 1, 3, 'minecraft:white_wool')",

		";upper level",
		"fillBlockState(-5, 4, -5, 5, 4, 5, planks)",
		"rotate8.setBlockStateLine(6, 4, 3, 0, 0, 1, 3, planks)",
		"fillBlockState(-2, 4, -2, 2, 4, 2, 'minecraft:air') ;hole in the middle for stairs",

		";fences",
		"rotate4.setBlockState(7, 5, 3, BlockState(fence, north: false, south: true,  east: false, west: false, waterlogged: false))",
		"rotate4.setBlockState(7, 5, 4, BlockState(fence, north: true,  south: true,  east: false, west: false, waterlogged: false))",
		"rotate4.setBlockState(7, 5, 5, BlockState(fence, north: true,  south: false, east: false, west: false, waterlogged: false))",
		"rotate4.setBlockState(6, 5, 6, BlockState(fence, north: false, south: false, east: false, west: false, waterlogged: false))",
		"rotate4.setBlockState(5, 5, 7, BlockState(fence, north: false, south: false, east: false, west: true,  waterlogged: false))",
		"rotate4.setBlockState(4, 5, 7, BlockState(fence, north: false, south: false, east: true,  west: true,  waterlogged: false))",
		"rotate4.setBlockState(3, 5, 7, BlockState(fence, north: false, south: false, east: true,  west: false, waterlogged: false))",

		";cobble outline",
		"rotate4.stack(0, 4, 0, 2).setBlockStateLine(5, 0, -1, 0, 0, 1, 3, 'minecraft:cobblestone')",
		"rotate8.setBlockState(6, 0, 2, 'minecraft:cobblestone')",
		"rotate8.stack(0, 4, 0, 2).setBlockStateLine(7, 0, 3, 0, 0, 1, 3, 'minecraft:cobblestone')",
		"rotate4.stack(0, 4, 0, 2).setBlockState(6, 0, 6, 'minecraft:cobblestone')",

		";outer walls",
		"rotate4.setBlockStateCuboid(5, 1, -1, 5, 7, 1, planks)",
		"rotate8.setBlockStateLine(6, 1, 2, 0, 1, 0, 8, log)",
		"rotate8.setBlockStateCuboid(7, 1, 3, 7, 3, 5, planks)",
		"rotate4.setBlockStateLine(6, 1, 6, 0, 1, 0, 3, log)",

		";inner wall",
		"rotate4.setBlockStateLine(2, 1, 2, 0, 1, 0, 7, log)",
		"rotate4.setBlockStateCuboid(3, 1, -1, 3, 7, 1, planks)",

		";staircase",
		"root.setBlockStateLine(0, 1, 0, 0, 1, 0, 5, log)",
		"Coordinator staircase = root",
		"random.if (staircase = staircase.flip1Z())",
		"Coordinator spiral = Coordinator.allOf(",
			"staircase,",
			"staircase.translate(0, 1, 0).rotate1x(90),",
			"staircase.translate(0, 2, 0).rotate1x(180),",
			"staircase.translate(0, 3, 0).rotate1x(270)",
		")",
		"spiral.translate(",
			"1, 1, 1,",
			"1, 1, 2,",
			"2, 1, 1",
		")",
		".setBlockState(0, 0, 0, slab)",
		"spiral.setBlockStateLine(0, 1, 1, 0, 0, 1, 2, slab.with('type', 'top'))",
		"staircase.setBlockStateLine(1, 4, 1, 1, 0, 0, 2, slab.with('type', 'top'))",
		"staircase.setBlockState(1, 5, 1, fence.getDefaultState())",

		";roof",
		"rotate8.stack(0, 1, -1, 3).setBlockStateLine(6, 8, 3, -1, 0, 0, 3, stairs)",
		"rotate8.setBlockStateLine(3, 8, 3, 0, 1, -1, 3, planks)",
		"rotate4.setBlockState(3, 9, 3, stairs.with('shape', 'inner_left'))",
		"rotate8.setBlockState(3, 10, 2, stairs)",
		"rotate4.setBlockStateLine(6, 11, 0, -1, 0, 0, 6, slab)",
		"setBlockState(0, 11, 0, slab)",
		"rotate4.setBlockStateCuboid(3, 8, -2, 5, 8, 2, planks)",
		"rotate4.setBlockStateCuboid(3, 9, -1, 5, 9, 1, planks)",
		"rotate4.setBlockStateLine(3, 10, 0, 1, 0, 0, 3, planks)",
		"rotate4.setBlockStateLine(4, 7, -1, 0, 0, 1, 3, planks)",
		"fillBlockState(-2, 8, -2, 2, 10, 2, planks)",
		"for (int z in range[1, 3]:",
			"for (int x in range[1, 4 - z]:",
				"rotate4.setBlockState(x, 11, z, slab)",
			")",
		")",
		"rotate8.setBlockState(6, 9, 1, stairs.with('facing', 'south').with('half', 'top'))",
		"rotate4.setBlockState(6, 10, 0, planks)",

		";decorations",
		"rotate4.setBlockState(4, 3, 4, 'minecraft:lantern[hanging=true,waterlogged=false]')",
		"root.setBlockState(0, 7, 0, 'minecraft:lantern[hanging=true,waterlogged=false]')",
		"BlockState glassPane = 'minecraft:glass_pane[north=true,south=true,east=false,west=false,waterlogged=false]'",
		"rotate8.setBlockState(7, 2, 4, glassPane)",
		"rotate4.stack(0, 4, 0, 2).setBlockState(5, 2, 0, glassPane)",
		"String hinge = random.nextBoolean() ? 'left' : 'right'",
		"setBlockState(5, 1, 0, palette.doorState(facing: 'west', half: 'lower', hinge: hinge, open: false, powered: false))",
		"setBlockState(5, 2, 0, palette.doorState(facing: 'west', half: 'upper', hinge: hinge, open: false, powered: false))",
		"setBlockState(6, 0, 0, 'minecraft:cobblestone_stairs[facing=west,half=bottom,shape=straight,waterlogged=false]')",
		"setBlockState(3, 1, 0, 'minecraft:air')",
		"setBlockState(3, 2, 0, 'minecraft:air')",
		"hinge = random.nextBoolean() ? 'left' : 'right'",
		"setBlockState(3, 5, 0, palette.doorState(facing: 'west', half: 'lower', hinge: hinge, open: false, powered: false))",
		"setBlockState(3, 6, 0, palette.doorState(facing: 'west', half: 'upper', hinge: hinge, open: false, powered: false))",

		";flowers outside",
		"Coordinator.allOf(",
			"root,",
			"root.rotate1x(90),",
			"root.rotate1x(270)",
		")",
		".$setBlockStateLine(-6, 0, -1, 0, 0, 1, 3, 'minecraft:grass_block[snowy=false]')",
		".$setBlockStateLine(-7, 0, -1, 0, 0, 1, 3, palette.trapdoorState(facing: 'west', half: 'top', open: true, powered: false, waterlogged: false))",
		"for (int offset in range[-1, 1]:",
			"setBlockState(offset, 1, -6, BlockTag('bigglobe:small_house_structure_flowers').random().getDefaultState())",
			"setBlockState(-6, 1, offset, BlockTag('bigglobe:small_house_structure_flowers').random().getDefaultState())",
			"setBlockState(offset, 1,  6, BlockTag('bigglobe:small_house_structure_flowers').random().getDefaultState())",
		")",

		";interior",
		"Coordinator front = root",
		"random.if (front = front.flip1Z())",

		";dining room",
		"front.translate(4, 1, 4).rotate4x90().setBlockState(0, 0, -1, stairs)",
		"front.setBlockState(4, 1, 4, fence.getDefaultState())",
		"front.setBlockState(4, 2, 4, palette.pressurePlateState(powered: false))",

		";kitchen",
		"front.setBlockStateLine(6, 1, -5, 0, 0, 1, 3, 'minecraft:smooth_quartz_stairs[facing=east,half=top,shape=straight,waterlogged=false]')",
		"front.setBlockStateLine(5, 1, -6, -1, 0, 0, 3, 'minecraft:smooth_quartz_stairs[facing=north,half=top,shape=straight,waterlogged=false]')",
		"front.setBlockStateLine(6, 3, -5, 0, 0, 1, 3, 'minecraft:barrel[facing=west,open=false]')",
		"front.setBlockStateLine(5, 3, -6, -1, 0, 0, 3, 'minecraft:barrel[facing=south,open=false]')",
		"random.if (",
			"front.setBlockState(3, 2, -6, BlockTag('minecraft:flower_pots').random().getDefaultState())",
			"front.setBlockState(6, 1, -3, 'minecraft:smoker[facing=west,lit=false]')",
		")",
		"else (",
			"front.setBlockState(6, 2, -3, BlockTag('minecraft:flower_pots').random().getDefaultState())",
			"front.setBlockState(3, 1, -6, 'minecraft:smoker[facing=south,lit=false]')",
		")",
		"ArrayList barrelContents = new(6)",
		"barrelContents",
		".$add('bigglobe:chests/large_house/kitchen_crops')",
		".$add('bigglobe:chests/large_house/kitchen_finished')",
		".$add('bigglobe:chests/large_house/kitchen_fish')",
		".$add('bigglobe:chests/large_house/kitchen_fruit')",
		".$add('bigglobe:chests/large_house/kitchen_meat')",
		".$add('bigglobe:chests/large_house/kitchen_other')",
		".$shuffle()",
		"for (int index in range[0, 3):",
			"front.mergeBlockData(6, 3, -5 + index, nbtCompound(",
				"LootTable: barrelContents.(index).as(String),",
				"LootTableSeed: random.nextLong()",
			"))",
		")",
		"for (int index in range[0, 3):",
			"front.mergeBlockData(5 - index, 3, -6, nbtCompound(",
				"LootTable: barrelContents.(index + 3).as(String),",
				"LootTableSeed: random.nextLong()",
			"))",
		")",

		";bedrooms",
		"BlockState bed = BlockState('minecraft:$randomColor()_bed', facing: 'east', occupied: false, part: 'foot')",
		"setBlockState(-4, 1, -6, bed)",
		"setBlockState(-3, 1, -6, bed.with('part', 'head'))",
		"bed = BlockState('minecraft:$randomColor()_bed', facing: 'south', occupied: false, part: 'foot')",
		"setBlockState(-6, 1, -4, bed)",
		"setBlockState(-6, 1, -3, bed.with('part', 'head'))",
		"bed = BlockState('minecraft:$randomColor()_bed', facing: 'east', occupied: false, part: 'foot')",
		"setBlockState(-4, 1, 6, bed)",
		"setBlockState(-3, 1, 6, bed.with('part', 'head'))",
		"bed = BlockState('minecraft:$randomColor()_bed', facing: 'north', occupied: false, part: 'foot')",
		"setBlockState(-6, 1, 4, bed)",
		"setBlockState(-6, 1, 3, bed.with('part', 'head'))",
		"random.if (",
			"setBlockState(-5, 1, -6, 'minecraft:crafting_table')",
			"setBlockState(-5, 2, -6, BlockState('minecraft:$randomColor()_candle', candles: random.nextInt(1, 5), lit: false, waterlogged: false))",
			"setBlockState(-6, 1, -5, 'minecraft:chest[facing=east,type=single,waterlogged=false]')",
		")",
		"else (",
			"setBlockState(-6, 1, -5, 'minecraft:crafting_table')",
			"setBlockState(-6, 2, -5, BlockState('minecraft:$randomColor()_candle', candles: random.nextInt(1, 5), lit: false, waterlogged: false))",
			"setBlockState(-5, 1, -6, 'minecraft:chest[facing=south,type=single,waterlogged=false]')",
		")",
		"random.if (",
			"setBlockState(-5, 1, 6, 'minecraft:crafting_table')",
			"setBlockState(-5, 2, 6, BlockState('minecraft:$randomColor()_candle', candles: random.nextInt(1, 5), lit: false, waterlogged: false))",
			"setBlockState(-6, 1, 5, 'minecraft:chest[facing=east,type=single,waterlogged=false]')",
		")",
		"else (",
			"setBlockState(-6, 1, 5, 'minecraft:crafting_table')",
			"setBlockState(-6, 2, 5, BlockState('minecraft:$randomColor()_candle', candles: random.nextInt(1, 5), lit: false, waterlogged: false))",
			"setBlockState(-5, 1, 6, 'minecraft:chest[facing=north,type=single,waterlogged=false]')",
		")",

		";spawn villagers",
		"summon(-4.5L, 1.0L, -2.5L, 'minecraft:villager')",
		"summon(-2.5L, 1.0L, -4.5L, 'minecraft:villager')",
		"summon(-4.5L, 1.0L,  2.5L, 'minecraft:villager')",
		"summon(-2.5L, 1.0L,  4.5L, 'minecraft:villager')"
	]
}