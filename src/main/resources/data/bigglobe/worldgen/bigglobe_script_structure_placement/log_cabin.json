{
	"placement": [
		"String randomColor(:",
			"random.switch(",
				"'white',      'orange', 'magenta', 'light_blue',",
				"'yellow',     'lime',   'pink',    'gray',",
				"'light_gray', 'cyan',   'purple',  'blue',",
				"'brown',      'green',  'red',     'black'",
			")",
		")",
		"WoodPalette palette = WoodPalette(data.palette.?asString() ?: return())",
		"Coordinator root = Coordinator.new()",
		"void placeDoor(int*(x, y, z), String facing:",
			"String hinge = random.if ('left') else ('right')",
			"BlockState door = palette.doorState(facing: facing, half: 'lower', hinge: hinge, open: false, powered: false)",
			"root.setBlockState(x, y, z, door)",
			"root.setBlockState(x, y + 1, z, door.with('half', 'upper'))",
		")",
		"BlockState*(",
			"logX = palette.logState(axis: 'x')",
			"logZ = palette.logState(axis: 'z')",
			"planks = palette.planksState()",
			"paneNS = 'minecraft:glass_pane[north=true,south=true,east=false,west=false,waterlogged=false]'",
			"paneEW = 'minecraft:glass_pane[north=false,south=false,east=true,west=true,waterlogged=false]'",
		")",

		";floor",
		"root.setBlockStateCuboid(-4, -1, -4, 4, -1, 4, planks)",

		";basic walls",
		"Coordinator.allOf(root.rotate2x180(), root.rotate2x180().rotate1x(90).translate(0, 1, 0)).stack(0, 2, 0, 3)",
		".$setBlockStateLine(-5, 0, -4, 1, 0, 0, 11, logX)",
		".$setBlockStateLine(-4, 0, -3, 0, 0, 1, 7,  logZ)",

		";roof",
		"Coordinator.allOf(",
			"root.translate(0, 11, 0),",
			"root.translate(0, 10, 1).stack(0, -1, 1, 5),",
			"root.translate(0, 10, -1).stack(0, -1, -1, 5)",
		")",
		".setBlockStateLine(-5, 0, 0, 1, 0, 0, 11, logX)",

		";roof walls",
		"for (int yOffset in range[0, 4]:",
			"root.flip2X().setBlockStateLine(4, 10 - yOffset, -yOffset, 0, 0, 1, yOffset << 1 | 1, logZ)",
		")",
		"root.flip2Z().setBlockStateLine(-3, 6, 4, 1, 0, 0, 7, logX)",

		";interior walls",
		"root.setBlockStateCuboid(-3, 0, 0, 3, 3, 0, logX)",
		"root.setBlockStateCuboid(0, 0, 1, 0, 2, 3, logZ)",

		";second floor",
		"root.setBlockStateCuboid(-3, 3, 1, 3, 3, 3, planks)",

		";interior. AKA the tedious part.",

		";doors",
		"placeDoor(4, 0, -2, 'west')",
		"placeDoor(2, 0, 0, random.if ('north') else ('south'))",
		"placeDoor(0, 0, 2, random.if ('east') else ('west'))",

		";windows",
		"root.setBlockStateCuboid(0, 1, -4, 2, 1, -4, paneEW)",
		"root.flip2X().setBlockState(4, 1, 2, paneNS)",
		"root.flip2X().setBlockState(2, 1, 4, paneEW)",
		"root.setBlockStateLine(-2, 5, 4, 2, 0, 0, 3, paneEW)",

		";bedrooms",
		"BlockState bed = BlockState('minecraft:$randomColor()_bed', facing: 'south', occupied: false, part: 'foot')",
		"root.setBlockState(3, 0, 2, bed)",
		"root.setBlockState(3, 0, 3, bed.with('part', 'head'))",
		"bed = BlockState('minecraft:$randomColor()_bed', facing: 'west', occupied: false, part: 'foot')",
		"root.setBlockState(-2, 0, 3, bed)",
		"root.setBlockState(-3, 0, 3, bed.with('part', 'head'))",

		";railing",
		"root.setBlockStateCuboid(-1, 4, 0, 3, 4, 0, palette.fenceState(east: true, west: true, north: false, south: false, waterlogged: false))",
		"root.setBlockState(-2, 4, 0, palette.fenceState(east: true, west: false, north: false, south: false, waterlogged: false))",
		"root.setBlockState(-2, 5, 0, 'minecraft:torch')",

		";lower staircase",
		"root.setBlockState(-3, 0, -3, planks)",
		"root.setBlockState(-2, 0, -3, planks)",
		"root.setBlockState(-3, 1, -3, planks)",
		"root.setBlockStateLine(-1, 0, -3, -1, 1, 0, 2, palette.stairsState(facing: 'west',  half: 'bottom', shape: 'straight', waterlogged: false))",
		"root.setBlockStateLine(-3, 2, -2,  0, 1, 1, 2, palette.stairsState(facing: 'south', half: 'bottom', shape: 'straight', waterlogged: false))",
		"root.setBlockStateLine(-3, 1, -2,  0, 1, 1, 2, palette.stairsState(facing: 'north', half: 'top',    shape: 'straight', waterlogged: false))",
		"root.setBlockState(-3, 3, 0, planks)",
		"BlockState barrel = 'minecraft:barrel[facing=east,open=false]'",
		"root.setBlockState(-3, 0, -1, barrel)",
		"root.setBlockState(-3, 0, -2, barrel)",
		"root.setBlockState(-3, 1, -1, barrel)",
		"root.mergeBlockData(-3, 0, -1, nbtCompound(LootTable: 'bigglobe:chests/large_house/kitchen_fish', LootTableSeed: random.nextLong()))",
		"root.mergeBlockData(-3, 0, -2, nbtCompound(LootTable: 'bigglobe:chests/large_house/kitchen_fish', LootTableSeed: random.nextLong()))",
		"root.mergeBlockData(-3, 1, -1, nbtCompound(LootTable: 'bigglobe:chests/large_house/kitchen_fish', LootTableSeed: random.nextLong()))",
		"root.setBlockState(0, 0, -1, 'minecraft:crafting_table')",

		";upper floor",
		"random.if (",
			"root.setBlockState(-2, 4, 3, 'minecraft:cartography_table')",
			"root.setBlockState( 0, 4, 3, 'minecraft:fletching_table')",
		")",
		"else (",
			"root.setBlockState(-2, 4, 3, 'minecraft:fletching_table')",
			"root.setBlockState( 0, 4, 3, 'minecraft:cartography_table')",
		")",

		";upper staircase and attic floor",
		"root.setBlockStateLine(3, 4, 2, 0, 1, -1, 4, palette.stairsState(facing: 'north', half: 'bottom', shape: 'straight', waterlogged: false))",
		"root.setBlockStateLine(3, 4, 1, 0, 1, -1, 3, palette.stairsState(facing: 'south', half: 'top',    shape: 'straight', waterlogged: false))",
		"root.setBlockState(3, 7, -3, planks)",
		"root.setBlockState(3, 7, -2, planks)",
		"root.setBlockStateCuboid(-3, 7, -3, 2, 7, 3, planks)",
		"root.setBlockState(3, 9, 0, 'minecraft:wall_torch[facing=west]')",
		"root.setBlockState(-3, 9, 0, 'minecraft:wall_torch[facing=east]')",
		"root.setBlockState(random.nextInt(-3, 4), 10, 0, 'minecraft:cobweb')",

		";spawn villagers",
		"root.summon( 2.5L, 0.0L, 2.5L, 'minecraft:villager')",
		"root.summon(-1.5L, 0.0L, 2.5L, 'minecraft:villager')"
	]
}